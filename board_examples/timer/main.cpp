/******************************************************************************\
		INCLUDES
\******************************************************************************/
#include <hal/Gpio.hpp>
#include <hal/Clock.hpp>
#include <hal/Timer.hpp>
#include <Pinout.hpp>

/******************************************************************************\
		DEFINES
\******************************************************************************/
#define LED_PORT							1
#define LED_PIN								0

#define TIMER_ID							2

/******************************************************************************\
		PROTOTYPES
\******************************************************************************/
void Led_High_ISR();

/******************************************************************************\
		GLOBALS
\******************************************************************************/
//configure led
::pinout::ConcretePinout pinLed(LED_PORT, LED_PIN);

//configure timer
::timer::ConcreteTimer timer0(TIMER_ID, ::timer::SubdivisionDelayMs, 1000 /*Period*/, &Led_High_ISR);

/******************************************************************************\
		FUNCTIONS
\******************************************************************************/
//led interrupt service routine
void Led_High_ISR()
{
	pinLed.high();

	return;
}

//------------------------------------------------------------------------------
int main(void)
{

	//force led low
	pinLed.low();

	//enable timer
	timer0.enable();

	while (1)
	{
		::clock::msleep(300);
		pinLed.low();
	}

}

//------------------------------------------------------------------------------

