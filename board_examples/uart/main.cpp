/******************************************************************************\
		INCLUDES
\******************************************************************************/
#include <hal/Clock.hpp>
#include <hal/Uart.hpp>

#include <stdio.h>

/******************************************************************************\
		DEFINES
\******************************************************************************/
#define CURRENT_UART  1

/******************************************************************************\
		PROTOTYPES
\******************************************************************************/
void callback (const uint8_t c);

/******************************************************************************\
		GLOBALS
\******************************************************************************/
::uart::ConcreteUart UartCommand(CURRENT_UART, &callback);

/******************************************************************************\
		FUNCTIONS
\******************************************************************************/

void callback (const uint8_t c)
{
	UartCommand.send(&c, sizeof(c));
	UartCommand.send("\r\n");
}

//------------------------------------------------------------------------------

extern "C"
{
void write_stdout (const unsigned char* ptr, unsigned int len)
{
	UartCommand.send(ptr, len);
}
}
//------------------------------------------------------------------------------

int main(void)
{
  unsigned char Idx = 0;
  while(1)
  {
    printf ("Index : %d\r\n", Idx);
    clock::msleep(500);
    Idx++;
  }
}

//------------------------------------------------------------------------------


